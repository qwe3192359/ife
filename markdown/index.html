<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>简易markdown文件解析器</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .wrap{
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .edit-wrap{
            width: 50%;
            padding-left: 50px;
            padding-top: 100px;
            min-height: 100vh;
            overflow-y: scroll;
            overflow-x: auto;
            float: left;
        }
        .show-wrap{
            width: 50%;
            padding-left: 50px;
            padding-top: 100px;
            background: #fcfaf2;
            min-height: 100vh;
            float: left;
        }
        div{
            outline: none;
        }
    </style>
</head>
<body>
<div class="wrap">
    <div class="edit-wrap" >
        <div id="con" contenteditable="true" >
            <div># 一级标题</div>
            <div>## 二级标题</div>
            <div>### 三级标题</div>
        </div>

    </div>
    <div class="show-wrap" id="show-wrap">

    </div>


</div>



<script>

    let showCon = document.getElementById('show-wrap');
    sliceCon();
    document.getElementById('con').onkeyup = sliceCon;
    //使用换行符切割字符串
    function sliceCon() {
        showCon.innerHTML = '';
        let list = document.getElementById('con').innerText.split(/[\n\r]/);
        for(let i =0;i<list.length;i++){
            isEle(list[i]);
        }
    }
    function isEle(list) {
        let RegExpList = [
            {
                title: 'h6',
                regexp: /^#{6}\s/
            },
            {
                title: 'h5',
                regexp: /^#{5}\s/
            },
            {
                title: 'h4',
                regexp: /^#{4}\s/
            },
            {
                title: 'h3',
                regexp: /^#{3}\s/
            },
            {
                title: 'h2',
                regexp: /^#{2}\s/
            },
            {
                title: 'h1',
                regexp: /^#\s/
            },
            {
                title: 'ol',
                regexp: /^[\-\*]\s/
            },
            {
                title: 'ul',
                regexp: /^\d\s/
            },
            {
                title: 'quote',
                regexp: /^\>\s/
            },
            {
                title: 'img',
                regexp: /^\[[\s\S]*?\]\([\s\S]*?\)/
            },
            {
                title: 'a',
                regexp: /^!\[[\s\S]*?\]\([\s\S]*?\)/
            },
            {
                title: 'b',
                regexp: /\*\*[\s\S]*?\*\*/
            },
            {
                title: 'i',
                regexp: /\*[\s\S]*?\*/
            },
            {
                title: 'code',
                regexp: /^\`[\s\S]*?\`/
            },
            {
                title: 'codeP',
                regexp: /^\`{3}[\s\S]*?\`{3}/
            },
            {
                title: 'hr',
                regexp: /^\*{3}/
            }
        ];
        for (let i in RegExpList){
            if(list.search(RegExpList[i].regexp) === 0){
                list.replace(RegExpList[i].regexp,'');
                //在右侧添加dom
                createElement(RegExpList[i].title,list);
                console.log(RegExpList[i].title);
                return
            }
        }
        createElement('p',list);
        return
    }
    //添加dom
    function createElement(ele,text) {
        //需要整行替换
        if(ele === 'h1' || 'h2' || 'h3' || 'h4' || 'h5' || 'h6'){
            let newEle = document.createElement(ele);
            newEle.innerText = text;
            showCon.appendChild(newEle);
        }
        //
        else if(ele === 'code' || 'b' || 'i'){
            
        }


    }
</script>



</body>
</html>